/* ========================
       1. VARIABLES & THEME
       ======================== */
    :root {
      --bg1: #1a2a43;
      --bg2: #10192e;
      --accent: #ffb74d;
      --accent2: #4db6ac;
      --muted: #aeb7c2;
      --board-size: min(880px, 96vw);
      --cell-size: 64px;
      --gap-size: 8px;
    }

    /* ========================
       2. GLOBAL STYLES
       ======================== */
    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: Inter, system-ui, Segoe UI, Roboto, Helvetica, Arial;
      background: linear-gradient(120deg, var(--bg1), var(--bg2));
      color: #e6eef8;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      overflow: auto;
      animation: colorShift 15s ease infinite;
    }

    /* ========================
       3. BACKGROUND & ANIMATION
       ======================== */
    .bg {
      position: fixed;
      inset: 0;
      z-index: -2;
      filter: blur(40px);
      opacity: 0.6;
      animation: shift 12s linear infinite;
      background: radial-gradient(
          circle at 10% 20%,
          rgba(125, 211, 252, 0.08),
          transparent 8%
        ),
        radial-gradient(
          circle at 80% 80%,
          rgba(245, 158, 11, 0.06),
          transparent 12%
        );
    }

    @keyframes shift {
      0% {
        transform: translate(0, 0);
      }
      50% {
        transform: translate(30px, -20px);
      }
      100% {
        transform: translate(0, 0);
      }
    }
    
    @keyframes colorShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ========================
       4. APP CONTAINER
       ======================== */
    .app {
      width: var(--board-size);
      max-width: 96vw;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), transparent);
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 10px 40px rgba(2, 6, 23, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    /* ========================
       5. HEADER
       ======================== */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    h1 {
      font-size: 20px;
      margin: 0;
    }

    .meta {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .timer,
    .score {
      font-family: monospace;
      background: linear-gradient(90deg, #06202b, #081827);
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    /* ========================
       6. MAIN CONTENT LAYOUT
       ======================== */
    .content {
      display: flex;
      gap: 18px;
    }

    .side {
      width: 300px;
    }

    .rules {
      margin-top: 8px;
      background: transparent;
      padding: 8px;
      border-radius: 8px;
      font-size: 14px;
      color: var(--muted);
      line-height: 1.4;
    }

    /* ========================
       7. GAME BOARD
       ======================== */
    .board-wrap {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.01), transparent);
      padding: 14px;
      border-radius: 12px;
      flex-grow: 1;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(6, var(--cell-size));
      grid-template-rows: repeat(6, var(--cell-size));
      gap: var(--gap-size);
      position: relative;
    }

    .cell {
      width: var(--cell-size);
      height: var(--cell-size);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: calc(var(--cell-size) / 2);
      cursor: pointer;
      background: linear-gradient(180deg, #071827, #092138);
      border: 1px solid rgba(255, 255, 255, 0.03);
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }

    .cell:active {
      transform: scale(0.96);
    }

    .cell.s {
      color: var(--accent2);
      text-shadow: 0 2px 6px rgba(245, 158, 11, 0.12);
    }

    .cell.m {
      color: var(--accent);
      text-shadow: 0 2px 6px rgba(125, 211, 252, 0.06);
    }

    .cell.shade {
      background: linear-gradient(180deg, #06121a, #071726);
    }

    .cell.locked {
      opacity: 1;
      cursor: default;
      box-shadow: inset 0 -6px 18px rgba(0, 0, 0, 0.45);
    }

    .cell.error {
      animation: errorPulse 2s ease;
    }

    @keyframes errorPulse {
      0% {
        box-shadow: 0 0 0 0 rgba(245, 75, 75, 0);
      }
      30% {
        box-shadow: 0 0 0 8px rgba(245, 75, 75, 0.12);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(245, 75, 75, 0);
      }
    }
    
    @keyframes enterAnimation {
      0% { transform: scale(0.1); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .cell.new-game-animate {
      animation: enterAnimation 0.6s cubic-bezier(.2, .9, .2, 1) forwards;
    }


    /* Connection indicator for drag-and-drop */
    .conn {
      position: absolute;
      font-weight: 700;
      pointer-events: none;
      border-radius: 6px;
      padding: 4px 6px;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(4px);
      z-index: 2;
      color: #e6eef8;
    }

    .conn.bad {
      background: rgba(255, 100, 100, 0.12);
    }

    /* ========================
       8. CONTROLS & BUTTONS
       ======================== */
    .controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn {
      background: linear-gradient(180deg, #0b1220, #071026);
      color: var(--accent);
      border: 1px solid rgba(125, 211, 252, 0.12);
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }

    .btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 30px rgba(13, 71, 161, 0.12);
    }

    .btn.secondary {
      background: linear-gradient(180deg, #071026, #06101c);
      color: #a7b6c7;
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    .btn.disabled {
      opacity: 0.45;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* ========================
       9. FOOTER
       ======================== */
    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
      color: var(--muted);
      font-size: 13px;
    }

    /* ========================
       10. MEDIA QUERIES (MOBILE FIRST)
       ======================== */
    @media (max-width: 880px) {
      body {
        align-items: flex-start;
        padding: 12px;
      }

      :root {
        --cell-size: min(13vw, 50px);
        --gap-size: 6px;
      }
      
      .app {
        width: 100%;
        padding: 12px;
      }
      
      header {
        flex-direction: column;
        align-items: flex-start;
      }

      .meta {
        margin-top: 8px;
        gap: 8px;
        width: 100%;
      }
      
      .timer, .score {
        flex-grow: 1;
        text-align: center;
      }

      .content {
        flex-direction: column;
        gap: 12px;
      }
      
      .side {
        width: 100%;
      }

      .board-wrap {
        padding: 8px;
      }

      .board {
        width: 100%;
        height: auto;
        grid-template-columns: repeat(6, 1fr);
        grid-template-rows: repeat(6, 1fr);
        gap: 6px;
      }
      
      .cell {
        width: auto;
        height: auto;
        aspect-ratio: 1 / 1;
        font-size: 1.8em;
      }

      .footer {
        flex-direction: column;
        gap: 8px;
        text-align: center;
      }
    }


